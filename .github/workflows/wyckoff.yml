name: Wyckoff Hunter

# è§¦å‘æœºåˆ¶
on:
  # 1. æ‰‹åŠ¨è§¦å‘ (æƒ³è·‘å°±è·‘)
  workflow_dispatch:
  
  # 2. å®šæ—¶è§¦å‘ (ä¿æŒä½ çš„èŠ‚å¥)
  schedule:
    # -------------------------------------------------------
    # ğŸ•’ èŠ‚å¥è¯´æ˜ (UTC æ—¶é—´):
    # ç¾è‚¡æ”¶ç›˜æ˜¯ç¾ä¸œ 16:00 (å¤ä»¤æ—¶) / 17:00 (å†¬ä»¤æ—¶)
    # å¯¹åº”çš„ UTC æ˜¯ 20:00 / 21:00
    # -------------------------------------------------------
    
    # æ–¹æ¡ˆ A: ã€æ”¶ç›˜å¤ç›˜ã€‘ (æ¨è)
    # UTC 21:30 = åŒ—äº¬æ—¶é—´ 05:30 (å†¬ä»¤æ—¶) / 04:30 (å¤ä»¤æ—¶)
    # æ­¤æ—¶ç¾è‚¡åˆšæ”¶ç›˜ï¼Œæ•°æ®å·²å®šå‹ï¼Œæ˜¯æ•æ‰"Daily Close"å½¢æ€çš„æœ€ä½³æ—¶æœº
    - cron: '30 21 * * 1-5'

    # æ–¹æ¡ˆ B: ã€ç›˜ä¸­å¼‚åŠ¨ã€‘ (å¦‚æœä½ æƒ³åœ¨ç¾è‚¡ä¸­åˆçœ‹ä¸€çœ¼)
    # UTC 17:00 = ç¾ä¸œä¸­åˆ 12:00 = åŒ—äº¬æ—¶é—´ 01:00
    # - cron: '0 17 * * 1-5' 

jobs:
  wyckoff_analysis:
    runs-on: ubuntu-latest
    
    steps:
    - name: Check out code (è¯»å–ä»£ç )
      uses: actions/checkout@v3

    - name: Set up Python (é…ç½®ç¯å¢ƒ)
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: Install dependencies (å®‰è£…ä¾èµ–)
      run: |
        pip install -r requirements.txt

    - name: Run Wyckoff Scan (æ‰§è¡Œå¨ç§‘å¤«æ‰«æ)
      env:
        # ğŸ” è¯»å–ä½ ä»“åº“é‡Œçš„æœºå¯†é…ç½®
        MAIL_USER: ${{ secrets.MAIL_USER }}
        MAIL_PASS: ${{ secrets.MAIL_PASS }}
        MAIL_TO: ${{ secrets.MAIL_TO }}
      run: |
        python wyckoff_scan.py
